<div class="theory-block">
    <span class="stage-badge">Context</span>
    <h3>1. The Strategic Role of Binary Arithmetic</h3>
    <p>
        Binary arithmetic represents the mechanical "gears" of a digital system. 
        It serves as the logic governing the CPU. Mastering addition and multiplication is the essential prerequisite for navigating complex data representations, such as <b>Two’s Complement</b>.
    </p>
    <div class="interactive-box">
        <strong><i class="fas fa-microchip"></i> Analogy:</strong>
        Think of an analog counter or a car’s odometer: when it moves backward from 000,000, it wraps around to 999,999. Binary logic operates on similar principles of circularity and finite bit-depth.
    </div>
</div>

<div class="theory-block">
    <h3>2. The Mechanics of Binary Addition</h3>
    <p>
        Just like in decimal, when a column exceeds its limit (2 in binary), we generate a <b>carry</b>.
    </p>

    <h4>Fundamental Rules</h4>
    <div class="table-wrapper">
        <table class="comparison-table" style="text-align: center;">
            <thead>
                <tr>
                    <th>Operation</th>
                    <th>Result</th>
                    <th>Carry Outcome</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>0 + 0</td><td>0</td><td>No carry</td></tr>
                <tr><td>0 + 1</td><td>1</td><td>No carry</td></tr>
                <tr><td>1 + 0</td><td>1</td><td>No carry</td></tr>
                <tr><td>1 + 1</td><td>0</td><td><b>Carry 1</b></td></tr>
                <tr style="background-color: #e8f5e9;">
                    <td>1 + 1 + 1</td>
                    <td><b>1</b></td>
                    <td><b>Carry 1</b></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="theory-block">
    <h3>3. Worked Examples: Binary Addition</h3>
    <p>Maintaining precise vertical alignment and a dedicated "Carry Row" is vital.</p>

    <h4>Example 1: Simple Addition</h4>
    <div style="font-family: 'Courier New', monospace; background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1rem; line-height: 1.4; white-space: pre; overflow-x: auto;">
  Carry: 0000
         1010  (10)
       + 0101  (5)
       ------
  Sum:   1111  (15)
    </div>

    <h4>Example 2: Chain of Carries</h4>
    <div style="font-family: 'Courier New', monospace; background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1rem; line-height: 1.4; white-space: pre; overflow-x: auto;">
  Carry: 1111
         1101  (13)
       + 0111  (7)
       ------
  Sum:  10100  (20)
    </div>

    <h4>Example 3: 8-bit Addition (Overflow Context)</h4>
    <div style="font-family: 'Courier New', monospace; background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1rem; line-height: 1.4; white-space: pre; overflow-x: auto;">
  Carry: 1001 0011 0
          1011 0011
        + 1001 0010
        -----------
  Sum: (1)0100 0101 
    </div>
    <p style="font-size: 0.9rem; margin-top: 10px;">
        <b>Note:</b> The (1) is the 9th bit. In unsigned addition, this is an <b>Overflow Error</b>. In Two's Complement subtraction, this is ignored.
    </p>
</div>

<div class="theory-block">
    <h3>4. Binary Multiplication: Shift and Add</h3>
    <p>
        Binary multiplication is a sequence of "shift and add" operations. 
        Every shift to the left effectively multiplies the value by a power of two.
    </p>

    <h4>Example: 4-bit by 2-bit (1011 × 11)</h4>
    <div style="font-family: 'Courier New', monospace; background: #fff3cd; color: #856404; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1rem; line-height: 1.4; white-space: pre; overflow-x: auto; border: 1px solid #ffeeba;">
          1011  (Multiplicand)
        x   11  (Multiplier)
        ------
          1011  (1011 x 1)
       + 10110  (1011 x 1, shifted)
       -------
        100001  (Summation)
    </div>

    <h4>Example: 8-bit result (1111 × 1000)</h4>
    <div style="font-family: 'Courier New', monospace; background: #fff3cd; color: #856404; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1rem; line-height: 1.4; white-space: pre; overflow-x: auto; border: 1px solid #ffeeba;">
            1111  (15)
          x 1000  (8)
          ------
            0000
           00000
          000000
       + 1111000
       ---------
         1111000  (120)
    </div>
</div>

<div class="theory-block">
    <h3>6. Identifying Common Pitfalls</h3>
    <p>In high-stakes examinations, accuracy is often compromised by a failure to account for bit-depth.</p>

    <div class="interactive-box">
        <strong><i class="fas fa-exclamation-triangle"></i> The Phenomenon of Overflow:</strong>
        Overflow occurs when a calculation produces a result that exceeds the allocated bit-depth (e.g., an 8-bit register attempting to store a 9-bit result).
    </div>

    <ul>
        <li><b>Unsigned Addition:</b> Carry-out to 9th bit = Error.</li>
        <li><b>Signed 8-bit (Shortint):</b> If adding two positive numbers results in a '1' in the MSB (sign bit), overflow has occurred.</li>
    </ul>

    <h4>Pro-Tips for Success:</h4>
    <ul style="list-style: none; padding-left: 0;">
        <li>✅ <b>Columnar Discipline:</b> Use fixed-width columns.</li>
        <li>✅ <b>The Visible Carry:</b> Always write the Carry Row.</li>
        <li>✅ <b>Sign-Bit Check:</b> Verify if result fits [-128..127].</li>
    </ul>
</div>

<div class="theory-block" style="border-left: 5px solid #27ae60;">
    <h3>7. Graded Practice Tasks</h3>
    <p>Solve these problems to test your understanding.</p>

    <div class="faq-item" onclick="this.classList.toggle('open')">
        <div class="faq-question">
            Level 1: Add 1101 + 0011
            <i class="fas fa-chevron-down" style="float:right"></i>
        </div>
        <div class="faq-answer">
            <pre style="font-family: monospace;">
  1111 (Carry)
  1101
+ 0011
------
 10000 (Result: 16)
            </pre>
        </div>
    </div>

    <div class="faq-item" onclick="this.classList.toggle('open')">
        <div class="faq-question">
            Level 1: Multiply 1010 × 10
            <i class="fas fa-chevron-down" style="float:right"></i>
        </div>
        <div class="faq-answer">
            <b>Result: 10100</b><br>
            (Multiplying by 10<sub>2</sub> (which is 2) is simply a left shift).
        </div>
    </div>

    <div class="faq-item" onclick="this.classList.toggle('open')">
        <div class="faq-question">
            Level 2: Subtract 17 - 14 (8-bit Two's Complement)
            <i class="fas fa-chevron-down" style="float:right"></i>
        </div>
        <div class="faq-answer">
            <b>1.</b> 17 = 00010001<br>
            <b>2.</b> 14 = 00001110 -> (Flip) 11110001 -> (+1) -> <b>11110010</b> (-14)<br>
            <b>3.</b> Add: 00010001 + 11110010 = <b>100000011</b><br>
            <b>4.</b> Ignore 9th bit. Result: <b>00000011</b> (Decimal 3).
        </div>
    </div>

    <div class="faq-item" onclick="this.classList.toggle('open')">
        <div class="faq-question">
            Level 3: Challenge (1111 × 1111)
            <i class="fas fa-chevron-down" style="float:right"></i>
        </div>
        <div class="faq-answer">
            <b>Product:</b> 11100001<sub>2</sub><br>
            <b>Decimal:</b> 225<br>
            <b>Fit in Shortint?</b> NO.<br>
            <i>Justification:</i> Signed 8-bit range is -128 to 127. 225 exceeds 127, causing an overflow error (it would look like a negative number).
        </div>
    </div>
</div>
